{"version":3,"file":"VrxDateRangePicker.stories-338bf0cf.js","sources":["../../src/components/VrxDateRangePicker/VrxDateRangePicker.vue"],"sourcesContent":["<template>\n  <div class=\"flex justify-center w-fit text-gray-900 dark:text-white relative\">\n    <div class=\"flex flex-row items-center gap-2 text-gray-400\">\n      <VrxDatePicker\n          ref=\"pickerStart\"\n          :type=\"type\"\n          :invalid=\"invalid\"\n          :valid-range=\"validRange\"\n          :date-format=\"dateFormat\"\n          :months-only=\"monthsOnly\"\n          :placeholder=\"placeholderFrom\"\n          :width=\"width\"\n          @click=\"pickerStop.closePicker()\"\n          :label=\"(labelStart ? labelStart : (labelStop ? '&nbsp;' : undefined))\"\n          :date=\"dateStart\"\n          :helper-text=\"(helperTextStart ? helperTextStart : (helperTextStop ? '&nbsp;' : undefined))\"\n      />\n      <div class=\"vrx-rangePickerBtn h-full flex flex-col items-center justify-center\" ref=\"dropdownBtn\">\n        <label v-if=\"labelStop || labelStart\"> &nbsp; <!-- Purely exists for alignment --></label>\n        <VrxIcon\n            @focusout=\"closePicker\"\n            @keydown.esc=\"closePicker\"\n            icon=\"chevron-down\"\n            class=\"hover:bg-gray-200 focus:outline-none dark:hover:bg-gray-600 cursor-pointer rounded-full\"\n            @click=\"showDropdown = !showDropdown\"\n        />\n        <label v-if=\"helperTextStart || helperTextStop\" class=\"mt-2 text-sm\"> &nbsp; <!-- Purely exists for alignment --> </label>\n      </div>\n      <VrxDatePicker\n          ref=\"pickerStop\"\n          :type=\"type\"\n          :invalid=\"invalid\"\n          :valid-range=\"validRange\"\n          :date-format=\"dateFormat\"\n          :months-only=\"monthsOnly\"\n          :placeholder=\"placeholderTo\"\n          :width=\"width\"\n          @click=\"pickerStart.closePicker()\"\n          :label=\"(labelStop ? labelStop : (labelStart ? '&nbsp;' : undefined))\"\n          :date=\"dateStop\"\n          :helper-text=\"(helperTextStop ? helperTextStop : (helperTextStart ? '&nbsp;' : undefined))\"\n      />\n    </div>\n  </div>\n    <div class=\"fixed top-0 left-0 w-full h-full z-20\" v-if=\"showDropdown\">\n      <div\n          v-append-to-body=\"[$refs.dropdownBtn, false, true]\"\n          v-if=\"showDropdown\"\n          @focusout=\"closePicker\"\n          @keydown.esc=\"closePicker\"\n          class=\"dropdown-vrx-picker absolute w-48 p-4 h-auto text-sm rounded-lg bg-gray-50 dark:bg-gray-700 flex flex-col gap-2 shadow-md\"\n          tabindex=\"0\"\n      >\n        <div class=\"flex flex-row justify-between items-center w-full\">\n          <VrxIcon icon=\"chevron-left\" class=\"rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 cursor-pointer\"\n                   @click=\"changeType(-1)\"/>\n          <span class=\"rounded-lg font-bold pt-1 pb-1 pr-2 pl-2 select-none\">{{ type }}</span>\n          <VrxIcon icon=\"chevron-right\" class=\"rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 cursor-pointer\"\n                   @click=\"changeType(+1)\"/>\n        </div>\n        <div class=\"flex flex-col justify-center w-full\">\n          <div\n              v-for=\"button in currentButtons\"\n              @click=\"button.action()\"\n              class=\"rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500 pt-1 pb-1 pr-2 pl-2 cursor-pointer justify-center flex select-none hover:text-blue-700 dark:hover:text-white\">\n            {{ button.value }}\n          </div>\n        </div>\n      </div>\n    </div>\n\n</template>\n\n<script setup lang=\"ts\">\n\nimport VrxDatePicker from \"@/components/VrxDatePicker/VrxDatePicker.vue\";\nimport {Ref, ref} from \"vue\";\nimport VrxIcon from \"@/components/VrxIcon/VrxIcon.vue\";\nimport {vAppendToBody} from \"@/directives\"\n\nconst pickerStart = ref();\nconst pickerStop = ref();\n\nconst type = ref('Current');\n\nconst showDropdown = ref(false);\n\ndefineProps<{\n  type: 'date' | 'time' | 'datetime',\n  validRange?: [Date | undefined, Date | undefined];\n  dateFormat?: string;\n  monthsOnly?: boolean;\n  placeholderFrom?: string;\n  placeholderTo?: string;\n  width?: number;\n  invalid?: boolean;\n  labelStart?: string;\n  labelStop?: string;\n  dateStart?: Ref<Date>;\n  dateStop?: Ref<Date>;\n  helperTextStart?: string;\n  helperTextStop?: string;\n}>();\n\nconst currentButtons = [\n  {value: \"Week\", action: () => setCurrentPeriod('w')},\n  {value: \"Month\", action: () => setCurrentPeriod('m')},\n  {value: \"Year\", action: () => setCurrentPeriod('y')},\n]\n\nconst changeType = (value: number) => {\n  const values = ['Previous', 'Current', 'Next'];\n  const index = values.indexOf(type.value);\n\n  switch (index) {\n    case 0:\n      value > 0 ? type.value = values[1] : type.value = values[2];\n      break;\n    case 1:\n      value > 0 ? type.value = values[2] : type.value = values[0];\n      break;\n    case 2:\n      value > 0 ? type.value = values[0] : type.value = values[1];\n      break;\n  }\n}\n\n\nconst getDates = () => {\n  return [pickerStart.value.getDate(), pickerStop.value.getDate()];\n}\n\nconst setDates = (dates: [Date | undefined, Date | undefined]) => {\n  pickerStart.value.setDate(dates[0]);\n  pickerStop.value.setDate(dates[1]);\n}\n\nconst closePicker = (event: any) => {\n  const eventTarget = event ? event.relatedTarget : null;\n  if(eventTarget && (eventTarget.classList.contains(\"dropdown-vrx-picker\") || eventTarget.classList.contains(\"vrx-rangePickerBtn\"))) return;\n  showDropdown.value = false;\n}\n\nconst setCurrentPeriod = (period: 'y' | 'm' | 'w') => {\n  const today = new Date();\n  let monthStart, dayStart, yearStart;\n  let monthStop, dayStop, yearStop;\n  switch (period) {\n    case 'y':\n      dayStart = 1;\n      dayStop = 31;\n      monthStart = 0;\n      monthStop = 11;\n      if (type.value === 'Current') {\n        yearStart = yearStop = today.getFullYear();\n      } else if (type.value === 'Previous') {\n        yearStart = yearStop = today.getFullYear() - 1;\n      } else {\n        yearStart = yearStop = today.getFullYear() + 1;\n      }\n      break;\n    case 'm':\n      yearStart = yearStop = today.getFullYear();\n      dayStart = 1;\n      dayStop = 0;\n\n      if (type.value === 'Current') {\n        monthStart = today.getMonth();\n        monthStop = today.getMonth() + 1;\n      } else if (type.value === 'Previous') {\n        monthStart = today.getMonth() - 1;\n        monthStop = today.getMonth();\n      } else {\n        monthStart = today.getMonth() + 1;\n        monthStop = today.getMonth() + 2;\n      }\n      break;\n    case 'w':\n      yearStart = yearStop = today.getFullYear();\n      monthStart = monthStop = today.getMonth();\n      if (type.value === 'Current') {\n        dayStart = today.getDate() - today.getDay();\n        dayStop = today.getDate() + (6 - today.getDay());\n      } else if (type.value === 'Previous') {\n        dayStart = today.getDate() - today.getDay() - 7;\n        dayStop = today.getDate() - today.getDay() - 1;\n      } else {\n        dayStart = today.getDate() - (6 - today.getDay()) + 1;\n        dayStop = today.getDate() + (6 - today.getDay()) + 7;\n      }\n      break;\n  }\n\n  pickerStart.value.setDate(new Date(yearStart, monthStart, dayStart));\n  pickerStop.value.setDate(new Date(yearStop, monthStop, dayStop));\n}\n\ndefineExpose({getDates, setDates});\n\n\n</script>\n\n<style scoped>\n\n</style>\n"],"names":["pickerStart","ref","pickerStop","type","showDropdown","currentButtons","setCurrentPeriod","changeType","value","values","getDates","setDates","dates","closePicker","event","eventTarget","period","today","monthStart","dayStart","yearStart","monthStop","dayStop","yearStop","__expose"],"mappings":"smDAgFA,MAAMA,EAAcC,IACdC,EAAaD,IAEbE,EAAOF,EAAI,SAAS,EAEpBG,EAAeH,EAAI,EAAK,EAmBxBI,EAAiB,CACrB,CAAC,MAAO,OAAQ,OAAQ,IAAMC,EAAiB,GAAG,CAAC,EACnD,CAAC,MAAO,QAAS,OAAQ,IAAMA,EAAiB,GAAG,CAAC,EACpD,CAAC,MAAO,OAAQ,OAAQ,IAAMA,EAAiB,GAAG,CAAC,CAAA,EAG/CC,EAAcC,GAAkB,CACpC,MAAMC,EAAS,CAAC,WAAY,UAAW,MAAM,EAG7C,OAFcA,EAAO,QAAQN,EAAK,KAAK,EAExB,CACb,IAAK,GACKK,EAAA,EAAIL,EAAK,MAAQM,EAAO,CAAC,EAAIN,EAAK,MAAQM,EAAO,CAAC,EAC1D,MACF,IAAK,GACKD,EAAA,EAAIL,EAAK,MAAQM,EAAO,CAAC,EAAIN,EAAK,MAAQM,EAAO,CAAC,EAC1D,MACF,IAAK,GACKD,EAAA,EAAIL,EAAK,MAAQM,EAAO,CAAC,EAAIN,EAAK,MAAQM,EAAO,CAAC,EAC1D,KACJ,CAAA,EAIIC,EAAW,IACR,CAACV,EAAY,MAAM,QAAA,EAAWE,EAAW,MAAM,SAAS,EAG3DS,EAAYC,GAAgD,CAChEZ,EAAY,MAAM,QAAQY,EAAM,CAAC,CAAC,EAClCV,EAAW,MAAM,QAAQU,EAAM,CAAC,CAAC,CAAA,EAG7BC,EAAeC,GAAe,CAC5B,MAAAC,EAAcD,EAAQA,EAAM,cAAgB,KAC/CC,IAAgBA,EAAY,UAAU,SAAS,qBAAqB,GAAKA,EAAY,UAAU,SAAS,oBAAoB,KAC/HX,EAAa,MAAQ,GAAA,EAGjBE,EAAoBU,GAA4B,CAC9C,MAAAC,MAAY,KAClB,IAAIC,EAAYC,EAAUC,EACtBC,EAAWC,EAASC,EACxB,OAAQP,EAAQ,CACd,IAAK,IACQG,EAAA,EACDG,EAAA,GACGJ,EAAA,EACDG,EAAA,GACRlB,EAAK,QAAU,UACLiB,EAAAG,EAAWN,EAAM,cACpBd,EAAK,QAAU,WACZiB,EAAAG,EAAWN,EAAM,YAAA,EAAgB,EAEjCG,EAAAG,EAAWN,EAAM,YAAA,EAAgB,EAE/C,MACF,IAAK,IACSG,EAAAG,EAAWN,EAAM,cAClBE,EAAA,EACDG,EAAA,EAENnB,EAAK,QAAU,WACjBe,EAAaD,EAAM,WACPI,EAAAJ,EAAM,SAAa,EAAA,GACtBd,EAAK,QAAU,YACXe,EAAAD,EAAM,SAAa,EAAA,EAChCI,EAAYJ,EAAM,aAELC,EAAAD,EAAM,SAAa,EAAA,EACpBI,EAAAJ,EAAM,SAAa,EAAA,GAEjC,MACF,IAAK,IACSG,EAAAG,EAAWN,EAAM,cAChBC,EAAAG,EAAYJ,EAAM,WAC3Bd,EAAK,QAAU,WACjBgB,EAAWF,EAAM,QAAY,EAAAA,EAAM,OAAO,EAC1CK,EAAUL,EAAM,QAAa,GAAA,EAAIA,EAAM,OAAO,IACrCd,EAAK,QAAU,YACxBgB,EAAWF,EAAM,QAAA,EAAYA,EAAM,OAAW,EAAA,EAC9CK,EAAUL,EAAM,QAAA,EAAYA,EAAM,OAAW,EAAA,IAE7CE,EAAWF,EAAM,WAAa,EAAIA,EAAM,UAAY,EACpDK,EAAUL,EAAM,WAAa,EAAIA,EAAM,UAAY,GAErD,KACJ,CAEAjB,EAAY,MAAM,QAAQ,IAAI,KAAKoB,EAAWF,EAAYC,CAAQ,CAAC,EACnEjB,EAAW,MAAM,QAAQ,IAAI,KAAKqB,EAAUF,EAAWC,CAAO,CAAC,CAAA,EAGpD,OAAAE,EAAA,CAAC,SAAAd,EAAU,SAAAC,CAAA,CAAS;;;;;;;;;;;"}