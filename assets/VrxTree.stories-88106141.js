import{d as Y,a as b,x as w,G as se,o as c,c as h,e as A,p as re,n as $,A as y,q as k,s as ne,H as le,I as de,J as R,K as M,L as U,t as z,F as Z,k as ee,C as ce,B as ie}from"./vue.esm-bundler-fef724a1.js";import{V as W}from"./VrxIcon-8aaf0ed9.js";/* empty css                                                                */import{_ as ue}from"./_plugin-vue_export-helper-c27b6911.js";import{V as pe}from"./VrxInput-75c15581.js";import{_ as te}from"./VrxButton.vue_vue_type_script_setup_true_lang-c090f67c.js";import"./styles-b96d5dc9.js";/* empty css                                                                  */import{_ as me}from"./VrxToggle.vue_vue_type_script_setup_true_lang-ae615960.js";/* empty css                                                                     *//* empty css                                                                  */import"./_commonjsHelpers-725317a4.js";const fe={class:"tree-element vrxtree-element-style rounded-s"},he=[".indeterminate"],ye={class:"w-full flex justify-between items-center flex-row"},ge=Y({__name:"TreeItem",props:{node:{},selectable:{type:Boolean},isParent:{type:Boolean},selected:{type:Boolean},selectedNodes:{},addNode:{type:Function},removeNodeById:{type:Function},removeNode:{type:Function},parentId:{},siblings:{}},emits:["checkClicked","cellClicked"],setup(i,{emit:g}){const e=i,u=b(null),p=b(e.node.open),d=b(e.selected||e.selectedNodes.includes(e.parentId)),v=b(!1);w(()=>e.selectedNodes,t=>{d.value=t.includes(e.node.id)||t.includes(e.parentId)||e.selected,v.value=t.filter(n=>n.includes(e.node.id)).length>0},{immediate:!0,deep:!0}),w(()=>e.selected,t=>{d.value=t||e.selectedNodes.includes(e.node.id)},{immediate:!0,deep:!0});const C=t=>{t.target.nodeName!=="INPUT"&&(p.value=!p.value)},N=(t,n,f)=>{m("cellClicked",t,n,f||u.value)},D=()=>{d.value=!d.value,d.value?e.addNode(e.node.id):e.removeNodeById(e.node.id,e.isParent),e.node.children.length>0&&e.node.children.forEach(t=>{e.removeNode(t)}),e.isParent||(S(),x(),m("checkClicked",e.node))},x=()=>{let t=!0;e.siblings.forEach(n=>{e.selectedNodes.includes(n.id)||(t=!1)}),t&&(e.siblings.forEach(n=>{e.removeNodeById(n.id)}),e.addNode(e.parentId))},S=()=>{(e.selectedNodes.includes(e.parentId)||e.selected)&&(e.removeNodeById(e.parentId,e.isParent),e.siblings.forEach(t=>{t.id!==e.node.id&&e.addNode(t.id)}))},E=()=>{e.isParent||(S(),x(),m("checkClicked",e.node))},m=g;return(t,n)=>{const f=se("TreeItem",!0);return c(),h("div",{"data-testid":"vrx-tree-node",class:$(["w-auto h-full flex flex-col",t.isParent?null:"pl-5"]),onClick:n[2]||(n[2]=ce(()=>N(t.node,e.parentId),["stop"])),ref_key:"elementRef",ref:u},[A("div",fe,[re(W,{icon:t.node.children.length>0?"chevron-right":"empty",class:$(p.value?"icon-rotate":"icon-off"),size:"5",onClick:C},null,8,["icon","class"]),t.node.icon?(c(),y(W,{key:0,icon:t.node.icon,size:"4"},null,8,["icon"])):k("",!0),t.selectable?ne((c(),h("input",{key:1,"data-testid":"vrx-tree-node-checkbox",type:"checkbox",class:"form-checkbox h-4 w-4","onUpdate:modelValue":n[0]||(n[0]=o=>d.value=o),onClick:D,".indeterminate":v.value&&!d.value},null,40,he)),[[le,d.value]]):k("",!0),A("div",ye,[t.node.asComponent===!0&&t.node.componentProps?(c(),y(U(t.node.component),R(M({key:0},t.node.componentProps())),{default:de(()=>[ie(z(t.node.componentSlots??t.node.text),1)]),_:1},16)):(c(),h("span",{key:1,class:$(t.node.class)},z(e.node.text),3)),t.node.rightComponent&&t.node.rightComponentProps?(c(),y(U(t.node.rightComponent),R(M({key:2},t.node.rightComponentProps())),null,16)):k("",!0)])]),t.node.children.length>0&&p.value?(c(!0),h(Z,{key:0},ee(t.node.children,o=>(c(),y(f,{node:o,key:o.id,selectable:t.selectable,selected:d.value,"selected-nodes":t.selectedNodes,"add-node":t.addNode,"remove-node":t.removeNode,"parent-id":e.node.id,siblings:t.node.children,"remove-node-by-id":t.removeNodeById,onCheckClicked:E,onCellClicked:n[1]||(n[1]=(r,a,s)=>N(r,a,s))},null,8,["node","selectable","selected","selected-nodes","add-node","remove-node","parent-id","siblings","remove-node-by-id"]))),128)):k("",!0)],2)}}}),ve=ue(ge,[["__scopeId","data-v-a3b3fbe6"]]),be={class:"flex flex-col gap-2.5 vrxtree-text-style","data-testid":"vrx-tree"},oe=Y({__name:"VrxTree",props:{data:{},selectable:{type:Boolean},searchable:{type:Boolean},returnsUserData:{type:Boolean}},emits:["cellClicked"],setup(i,{expose:g,emit:e}){const u=i,p=o=>{const r=(a,s)=>{a.children.forEach(l=>{l.id=s+"-"+Math.random().toString(16).slice(2),l.selected&&n.value.push(l.id),r(l,l.id)})};o.forEach(a=>{a.id=Math.random().toString(16).slice(2),a.selected&&n.value.push(a.id),r(a,a.id)})},d=(o,r=!1)=>{r&&(n.value=[]),n.value.includes(o)&&n.value.splice(n.value.indexOf(o),1)},v=o=>{d(o.id),N(o)},C=o=>{n.value.includes(o)||n.value.push(o)},N=o=>{n.value.forEach(r=>{r.includes(o.id)&&n.value.splice(n.value.indexOf(r),1)})},D=o=>{let r;const a=s=>{if(s.text===o){r=s;return}s.children.length>0&&s.children.forEach(l=>{a(l)})};return a(u.data[0]),r},x=o=>{let r=null;const a=s=>{if(s.id===o){r=s;return}s.children.length>0&&s.children.forEach(l=>{r||a(l)})};return a(u.data[0]),r},S=o=>{let r=null;const a=s=>{if(s.children.some(l=>l.id===o.id)){r=s;return}s.children.length>0&&s.children.forEach(l=>{r||a(l)})};return a(u.data[0]),r},E=()=>{const o=[],r=s=>{n.value.includes(s.id)&&o.push(s),s.children.length>0&&s.children.forEach(l=>{r(l)})};r(u.data[0]);const a=o.flatMap(s=>m(s));return u.returnsUserData?a.map(s=>s.userData??s):a},m=o=>{const r=[],a=s=>{r.push(s),s.children.forEach(l=>{a(l)})};return a(o),r},t=(o,r,a)=>{f("cellClicked",o,r,a)},n=b([]),f=e;return p(u.data),g({getSelectedNodes:E,getNodeByText:D,removeNodeById:d,addNode:C,removeNode:v,flattenTree:m,getNodeById:x,getParentNode:S}),(o,r)=>(c(),h("div",be,[o.searchable?(c(),y(pe,{key:0,"model-value":"test",icon:"search"})):k("",!0),(c(!0),h(Z,null,ee(o.data,a=>(c(),y(ve,{"parent-id":a.id,node:a,selectable:o.selectable??!1,"is-parent":!0,key:a.id,"selected-nodes":n.value,"add-node":C,"remove-node-by-id":d,"remove-node":v,siblings:a.children,onCellClicked:t},null,8,["parent-id","node","selectable","selected-nodes","siblings"]))),128))]))}}),Ae={title:"VrxTree",component:oe,tags:["autodocs"],argTypes:{searchable:{description:"allows nodes search [NOT IMPLEMENTED]",control:{type:"boolean"},table:{category:"props",type:{summary:"boolean"},defaultValue:{summary:"false"}}},selectable:{description:"make the tree nodes selectable",control:{type:"boolean"},table:{category:"props",type:{summary:"boolean"},defaultValue:{summary:"false"}}},returnsUserData:{description:"type of returned data of the selected nodes",control:{type:"boolean"},table:{category:"props",type:{summary:"boolean"},defaultValue:{summary:"false"}}}}},ae=[{text:"Parent",icon:"folder",id:"x",open:!1,userData:{type:"country"},selected:!1,children:Array.from(Array(5).keys()).map(i=>({text:`Child ${i}`,id:"x",userData:{test:"ciao"},icon:"folder",selected:!1,children:Array.from(Array(2).keys()).map(g=>({text:`Sub Child ${g}`,icon:"folder",id:"x",userData:{test:"bau"},selected:!1,children:Array.from(Array(2).keys()).map(e=>({text:`Sub Sub Child ${e}`,icon:"document",id:"x",userData:{test:"miao"},selected:!1,children:[]}))}))}))}],ke=[{text:"Parent",icon:"folder",id:"x",open:!1,userData:{type:"country"},selected:!1,children:Array.from(Array(5).keys()).map(i=>({id:"x",text:`Child ${i}`,userData:{test:"ciao"},selected:!1,children:[],asComponent:!0,component:te,componentProps:()=>({color:i%2===0?"default":"green",size:"md",class:"my-2"}),componentSlots:`Child ${i}`}))}],Ce=[{text:"Parent",icon:"folder",id:"x",open:!1,userData:{type:"country"},selected:!1,children:[],rightSlot:!0,rightComponent:me,rightComponentProps:()=>({})}],V={render:i=>({components:{VrxTree:oe,VrxButton:te},setup(){return{args:i}},methods:{logSelected(){alert(JSON.stringify(this.$refs.myRef.getSelectedNodes()))},findNode(){alert(JSON.stringify(this.$refs.myRef.getNodeByText("Sub Sub Child 0")))}},template:`
          <div style="height: auto; width: auto">
                <VrxTree @cell-clicked="(a,b,c) => console.log('cellClicked', a, b, c)" ref="myRef" :check-nodes="true" :data="args.data" :selectable="args.selectable" :searchable="args.searchable" :returns-user-data="args.returnsUserData"/>
                <div style="padding-top: 30px; display: flex; flex-direction: row; gap: 5px">
                    <VrxButton color="default" size="sm" @click="logSelected" >Log selected nodes</VrxButton>
                    <VrxButton color="default" size="sm" @click="findNode" >Log found node (Sub Sub Child 0)</VrxButton>
                </div>
          </div>
         
        `}),args:{}},B={...V,args:{data:ae,selectable:!1,searchable:!1,returnsUserData:!1}},P={...V,args:{data:ae,selectable:!0}},I={...V,args:{data:ke}},T={...V,args:{data:Ce}};var O,F,L;B.parameters={...B.parameters,docs:{...(O=B.parameters)==null?void 0:O.docs,source:{originalSource:`{
  ...Template,
  args: {
    data,
    selectable: false,
    searchable: false,
    returnsUserData: false
  }
}`,...(L=(F=B.parameters)==null?void 0:F.docs)==null?void 0:L.source}}};var H,J,_;P.parameters={...P.parameters,docs:{...(H=P.parameters)==null?void 0:H.docs,source:{originalSource:`{
  ...Template,
  args: {
    data,
    selectable: true
  }
}`,...(_=(J=P.parameters)==null?void 0:J.docs)==null?void 0:_.source}}};var j,q,G;I.parameters={...I.parameters,docs:{...(j=I.parameters)==null?void 0:j.docs,source:{originalSource:`{
  ...Template,
  args: {
    data: dataWithComponent
  }
}`,...(G=(q=I.parameters)==null?void 0:q.docs)==null?void 0:G.source}}};var K,Q,X;T.parameters={...T.parameters,docs:{...(K=T.parameters)==null?void 0:K.docs,source:{originalSource:`{
  ...Template,
  args: {
    data: dataWithRightSlot
  }
}`,...(X=(Q=T.parameters)==null?void 0:Q.docs)==null?void 0:X.source}}};const Re=["Primary","Selectable","WithComponent","RightSlot"];export{B as Primary,T as RightSlot,P as Selectable,I as WithComponent,Re as __namedExportsOrder,Ae as default};
