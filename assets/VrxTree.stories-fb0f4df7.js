import{d as $,a as k,w as C,x as F,o as n,c as m,b as S,e as L,n as I,i as x,g as N,y as R,z as H,t as J,F as w,f as A}from"./vue.esm-bundler-7306b2ef.js";import{V as T}from"./VrxIcon-7936db3b.js";/* empty css                                                                */import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";import{V as j}from"./VrxInput-ddbdd671.js";import{_ as q}from"./VrxButton.vue_vue_type_script_setup_true_lang-a474a285.js";import"./styles-70794e3d.js";/* empty css                                                                  *//* empty css                                                                  *//* empty css                                                                  */import"./_commonjsHelpers-725317a4.js";const G=[".indeterminate"],K=$({__name:"TreeItem",props:{node:{},selectable:{type:Boolean},isParent:{type:Boolean},selected:{type:Boolean},selectedNodes:{},addNode:{type:Function},removeNodeById:{type:Function},removeNode:{type:Function},parentId:{},siblings:{}},emits:["checkClicked"],setup(c,{emit:i}){const e=c,u=k(e.node.open),l=k(e.selected||e.selectedNodes.includes(e.parentId)),p=k(!1);C(()=>e.selectedNodes,t=>{l.value=t.includes(e.node.id)||t.includes(e.parentId)||e.selected,p.value=t.filter(a=>a.includes(e.node.id)).length>0},{immediate:!0,deep:!0}),C(()=>e.selected,t=>{l.value=t||e.selectedNodes.includes(e.node.id)},{immediate:!0,deep:!0});const f=t=>{t.target.nodeName!=="INPUT"&&(u.value=!u.value)},B=()=>{l.value=!l.value,l.value?e.addNode(e.node.id):e.removeNodeById(e.node.id,e.isParent),e.node.children.length>0&&e.node.children.forEach(t=>{e.removeNode(t)}),e.isParent||(y(),h(),i("checkClicked",e.node))},h=()=>{let t=!0;e.siblings.forEach(a=>{e.selectedNodes.includes(a.id)||(t=!1)}),t&&(e.siblings.forEach(a=>{e.removeNodeById(a.id)}),e.addNode(e.parentId))},y=()=>{(e.selectedNodes.includes(e.parentId)||e.selected)&&(e.removeNodeById(e.parentId,e.isParent),e.siblings.forEach(t=>{t.id!==e.node.id&&e.addNode(t.id)}))},v=()=>{e.isParent||(y(),h(),i("checkClicked",e.node))};return(t,a)=>{const r=F("TreeItem",!0);return n(),m("div",{"data-testid":"vrx-tree-node",class:I(["w-auto h-full flex flex-col",t.isParent?null:"pl-5"])},[S("div",{class:"tree-element hover:bg-gray-100 dark:hover:bg-gray-800 rounded-s",onClick:f},[L(T,{icon:t.node.children.length>0?"chevron-right":"empty",class:I(u.value?"icon-rotate":"icon-off"),size:"5"},null,8,["icon","class"]),t.node.icon?(n(),x(T,{key:0,icon:t.node.icon,size:"4"},null,8,["icon"])):N("",!0),t.selectable?R((n(),m("input",{key:1,"data-testid":"vrx-tree-node-checkbox",type:"checkbox",class:"form-checkbox h-4 w-4 text-gray-600","onUpdate:modelValue":a[0]||(a[0]=s=>l.value=s),onClick:B,".indeterminate":p.value&&!l.value},null,8,G)),[[H,l.value]]):N("",!0),S("span",null,J(e.node.text),1)]),t.node.children.length>0&&u.value?(n(!0),m(w,{key:0},A(t.node.children,s=>(n(),x(r,{node:s,key:s.id,selectable:t.selectable,selected:l.value,"selected-nodes":t.selectedNodes,"add-node":t.addNode,"remove-node":t.removeNode,"parent-id":e.node.id,siblings:t.node.children,"remove-node-by-id":t.removeNodeById,onCheckClicked:v},null,8,["node","selectable","selected","selected-nodes","add-node","remove-node","parent-id","siblings","remove-node-by-id"]))),128)):N("",!0)],2)}}}),Q=W(K,[["__scopeId","data-v-50822f8a"]]),X={class:"flex flex-col gap-2.5 text-gray-900 dark:text-white","data-testid":"vrx-tree"},M=$({__name:"VrxTree",props:{data:{},selectable:{type:Boolean},searchable:{type:Boolean},returnsUserData:{type:Boolean}},setup(c,{expose:i}){const e=c,u=a=>{const r=(s,o)=>{s.children.forEach(d=>{d.id=o+"-"+Math.random().toString(16).slice(2),d.selected&&t.value.push(d.id),r(d,d.id)})};a.forEach(s=>{s.id=Math.random().toString(16).slice(2),s.selected&&t.value.push(s.id),r(s,s.id)})},l=(a,r=!1)=>{r&&(t.value=[]),t.value.includes(a)&&t.value.splice(t.value.indexOf(a),1)},p=a=>{l(a.id),B(a)},f=a=>{t.value.includes(a)||t.value.push(a)},B=a=>{t.value.forEach(r=>{r.includes(a.id)&&t.value.splice(t.value.indexOf(r),1)})},h=a=>{let r;const s=o=>{if(o.text===a){r=o;return}o.children.length>0&&o.children.forEach(d=>{s(d)})};return s(e.data[0]),r},y=()=>{const a=[],r=o=>{t.value.includes(o.id)&&a.push(o),o.children.length>0&&o.children.forEach(d=>{r(d)})};r(e.data[0]);const s=a.flatMap(o=>v(o));return e.returnsUserData?s.map(o=>o.userData??o):s},v=a=>{const r=[],s=o=>{r.push(o),o.children.forEach(d=>{s(d)})};return s(a),r},t=k([]);return u(e.data),i({getSelectedNodes:y,getNodeByText:h,removeNodeById:l,addNode:f,removeNode:p,flattenTree:v}),(a,r)=>(n(),m("div",X,[a.searchable?(n(),x(j,{key:0,"model-value":"test",icon:"search"})):N("",!0),(n(!0),m(w,null,A(a.data,s=>(n(),x(Q,{"parent-id":s.id,node:s,selectable:a.selectable??!1,"is-parent":!0,key:s.id,"selected-nodes":t.value,"add-node":f,"remove-node-by-id":l,"remove-node":p,siblings:s.children},null,8,["parent-id","node","selectable","selected-nodes","siblings"]))),128))]))}}),ce={title:"VrxTree",component:M,tags:["autodocs"],argTypes:{searchable:{description:"allows nodes search [NOT IMPLEMENTED]",control:{type:"boolean"},table:{category:"props",type:{summary:"boolean"},defaultValue:{summary:"false"}}},selectable:{description:"make the tree nodes selectable",control:{type:"boolean"},table:{category:"props",type:{summary:"boolean"},defaultValue:{summary:"false"}}},returnsUserData:{description:"type of returned data of the selected nodes",control:{type:"boolean"},table:{category:"props",type:{summary:"boolean"},defaultValue:{summary:"false"}}}}},z=[{text:"Parent",icon:"folder",id:"x",open:!1,userData:{type:"country"},selected:!1,children:Array.from(Array(5).keys()).map(c=>({text:`Child ${c}`,id:"x",userData:{test:"ciao"},icon:"folder",selected:!1,children:Array.from(Array(2).keys()).map(i=>({text:`Sub Child ${i}`,icon:"folder",id:"x",userData:{test:"bau"},selected:!1,children:Array.from(Array(2).keys()).map(e=>({text:`Sub Sub Child ${e}`,icon:"document",id:"x",userData:{test:"miao"},selected:!1,children:[]}))}))}))}],O={render:c=>({components:{VrxTree:M,VrxButton:q},setup(){return{args:c}},methods:{logSelected(){alert(JSON.stringify(this.$refs.myRef.getSelectedNodes()))},findNode(){alert(JSON.stringify(this.$refs.myRef.getNodeByText("Sub Sub Child 0")))}},template:`
          <div style="height: auto; width: auto">
                <VrxTree ref="myRef" :check-nodes="true" :data="args.data" :selectable="args.selectable" :searchable="args.searchable" :returns-user-data="args.returnsUserData"/>
                <div style="padding-top: 30px; display: flex; flex-direction: row; gap: 5px">
                    <VrxButton color="default" size="sm" @click="logSelected" >Log selected nodes</VrxButton>
                    <VrxButton color="default" size="sm" @click="findNode" >Log found node (Sub Sub Child 0)</VrxButton>
                </div>
          </div>
         
        `}),args:{}},b={...O,args:{data:z,selectable:!1,searchable:!1,returnsUserData:!1}},g={...O,args:{data:z,selectable:!0}};var V,E,D;b.parameters={...b.parameters,docs:{...(V=b.parameters)==null?void 0:V.docs,source:{originalSource:`{
  ...Template,
  args: {
    data,
    selectable: false,
    searchable: false,
    returnsUserData: false
  }
}`,...(D=(E=b.parameters)==null?void 0:E.docs)==null?void 0:D.source}}};var P,_,U;g.parameters={...g.parameters,docs:{...(P=g.parameters)==null?void 0:P.docs,source:{originalSource:`{
  ...Template,
  args: {
    data,
    selectable: true
  }
}`,...(U=(_=g.parameters)==null?void 0:_.docs)==null?void 0:U.source}}};const ie=["Primary","Selectable"];export{b as Primary,g as Selectable,ie as __namedExportsOrder,ce as default};
//# sourceMappingURL=VrxTree.stories-fb0f4df7.js.map
